{"version":3,"sources":["webpack:///./src/pages/admin/manage/SourceEdit/EditHeader.vue","webpack:///./src/pages/admin/manage/SourceEdit/EditHeader.vue?311d","webpack:///./src/pages/admin/manage/SourceEdit/index.vue?deb5","webpack:///./src/pages/admin/manage/SourceEdit/index.vue?108d","webpack:///./src/pages/admin/manage/SourceEdit/index.vue?6f0c","webpack:///./src/pages/admin/manage/SourceEdit/EditHeader.vue?4b3f","webpack:///./src/pages/admin/manage/SourceEdit/EditHeader.vue?1fb3","webpack:///./src/pages/admin/manage/SourceEdit/index.vue","webpack:///./src/pages/admin/manage/SourceEdit/index.vue?465e","webpack:///src/pages/admin/manage/SourceEdit/index.vue","webpack:///./src/pages/admin/manage/SourceEdit/EditHeader.vue?ed57","webpack:///src/pages/admin/manage/SourceEdit/EditHeader.vue"],"names":["__webpack_require__","r","__webpack_exports__","_EditHeader_vue_vue_type_template_id_1796e502_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_EditHeader_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_EditHeader_vue_vue_type_style_index_0_id_1796e502_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_e3f45efe_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","_h","this","$createElement","_c","_self","directives","name","rawName","value","isLoading","loading","opacity","expression","staticClass","_v","attrs","origin-list","originList","cache-list","cacheList","pending","on","updateList","saveSetting","staticRenderFns","_vm","class","active","$route","finished","_s","i18n","setting","source","cache","_index_vue_vue_type_template_id_e3f45efe_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","_vuex","_errorHandler","components","EditHeader","_EditHeader2","default","data","sourceData","emptyData","isCreating","created","loadData","methods","_extends3","mapActions","_this","_asyncToGenerator3","_regenerator2","mark","_callee","wrap","_context","prev","next","loadPackageSource","sent","objects","length","transformData","t0","errorHandler","finish","stop","forEach","item","category","push","type","val","_tools2","deepClone","$bkMessage","theme","message","gettext","delay","deleteSetting","createOrUpdateSetting","_this2","_callee2","_context2","map","origin_source_id","deletePackageSource","$router","_this3","_callee3","origins","_context3","id","desc","packages","details","caches","createPackageSource","updatePackageSource","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_EditHeader_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_EditHeader_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"dev/dist/js/29.js","sourcesContent":["import { render, staticRenderFns } from \"./EditHeader.vue?vue&type=template&id=1796e502&scoped=true&\"\nimport script from \"./EditHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./EditHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1796e502\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/lib/loader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/lib/loader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/lib/loader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib/index.js!../../../../../node_modules/sass-loader/lib/loader.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"bkloading\",rawName:\"v-bkloading\",value:({ isLoading: _vm.loading, opacity: 1 }),expression:\"{ isLoading: loading, opacity: 1 }\"}],staticClass:\"source-edit\"},[_c('edit-header'),_vm._v(\" \"),_c('router-view',{attrs:{\"origin-list\":_vm.originList,\"cache-list\":_vm.cacheList,\"pending\":_vm.pending},on:{\"updateList\":_vm.updateList,\"saveSetting\":_vm.saveSetting}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=e3f45efe&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"edit-header\"},[_c('div',{class:['step-item', {\n        'active': _vm.$route.name === 'packageEdit',\n        'finished': _vm.$route.name === 'cacheEdit'\n    }]},[_c('div',{staticClass:\"step-content\"},[_c('div',{staticClass:\"num\"},[_vm._v(\"1\")]),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.i18n.setting + _vm.i18n.source))])])]),_vm._v(\" \"),_c('div',{class:['step-item', {\n        'active': _vm.$route.name === 'cacheEdit'\n    }]},[_c('div',{staticClass:\"step-content\"},[_c('div',{staticClass:\"num\"},[_vm._v(\"2\")]),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.i18n.setting + _vm.i18n.cache))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditHeader.vue?vue&type=template&id=1796e502&scoped=true&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e3f45efe&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3f45efe\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","/**\r\n* Tencent is pleased to support the open source community by making 蓝鲸智云PaaS平台社区版 (BlueKing PaaS Community\r\n* Edition) available.\r\n* Copyright (C) 2017-2019 THL A29 Limited, a Tencent company. All rights reserved.\r\n* Licensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n* http://opensource.org/licenses/MIT\r\n* Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\r\n* an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n* specific language governing permissions and limitations under the License.\r\n*/\r\n<template>\r\n    <div class=\"source-edit\" v-bkloading=\"{ isLoading: loading, opacity: 1 }\">\r\n        <edit-header></edit-header>\r\n        <router-view\r\n            :origin-list=\"originList\"\r\n            :cache-list=\"cacheList\"\r\n            :pending=\"pending\"\r\n            @updateList=\"updateList\"\r\n            @saveSetting=\"saveSetting\">\r\n        </router-view>\r\n    </div>\r\n</template>\r\n<script>\r\n    import '@/utils/i18n.js'\r\n    import { mapActions } from 'vuex'\r\n    import { errorHandler } from '@/utils/errorHandler.js'\r\n    import tools from '@/utils/tools.js'\r\n    import EditHeader from './EditHeader.vue'\r\n\r\n    export default {\r\n        name: 'SourceEdit',\r\n        components: {\r\n            EditHeader\r\n        },\r\n        data () {\r\n            return {\r\n                sourceData: [],\r\n                emptyData: false,\r\n                isCreating: false,\r\n                originList: [],\r\n                cacheList: [],\r\n                loading: true,\r\n                pending: false\r\n            }\r\n        },\r\n        created () {\r\n            this.loadData()\r\n        },\r\n        methods: {\r\n            ...mapActions('manage', [\r\n                'loadPackageSource',\r\n                'createPackageSource',\r\n                'updatePackageSource',\r\n                'deletePackageSource'\r\n            ]),\r\n            async loadData () {\r\n                this.loading = true\r\n                try {\r\n                    const data = await this.loadPackageSource()\r\n                    if (!data.objects.length) {\r\n                        this.emptyData = true\r\n                        this.isCreating = true\r\n                    } else {\r\n                        this.sourceData = data.objects\r\n                        this.transformData(data.objects)\r\n                    }\r\n                } catch (err) {\r\n                    errorHandler(err, this)\r\n                } finally {\r\n                    this.loading = false\r\n                }\r\n            },\r\n            transformData (data) {\r\n                const originList = []\r\n                const cacheList = []\r\n                data.forEach(item => {\r\n                    if (item.category === 'origin') {\r\n                        originList.push(item)\r\n                    } else {\r\n                        cacheList.push(item)\r\n                    }\r\n                })\r\n                this.originList = originList\r\n                this.cacheList = cacheList\r\n            },\r\n            updateList (type, value) {\r\n                const val = tools.deepClone(value)\r\n                if (type === 'originList') {\r\n                    this.originList = val\r\n                } else {\r\n                    this.cacheList = val\r\n                }\r\n            },\r\n            saveSetting () {\r\n                if (this.pending) {\r\n                    return\r\n                }\r\n                \r\n                // 本地缓存不为空，主包源为空\r\n                if (this.cacheList.length > 0 && this.originList.length === 0) {\r\n                    this.$bkMessage({\r\n                        theme: 'error',\r\n                        message: gettext('请添加主包源'),\r\n                        delay: 10000\r\n                    })\r\n                    return\r\n                }\r\n\r\n                if (this.originList.length === 0 && this.cacheList.length === 0) {\r\n                    if (this.isCreating) {\r\n                        // 本地缓存、主包源在创建时为空\r\n                        this.$bkMessage({\r\n                            theme: 'error',\r\n                            message: gettext('请添加主包源'),\r\n                            delay: 10000\r\n                        })\r\n                    } else {\r\n                        // 本地缓存、主包源在编辑时为空\r\n                        this.deleteSetting()\r\n                    }\r\n                } else {\r\n                    this.createOrUpdateSetting()\r\n                }\r\n            },\r\n            async deleteSetting () {\r\n                this.pending = true\r\n                \r\n                const data = this.sourceData.map(item => {\r\n                    return {\r\n                        origin_source_id: item.origin_source_id,\r\n                        type: item.type,\r\n                        name: item.name\r\n                    }\r\n                })\r\n                try {\r\n                    await this.deletePackageSource(data)\r\n                    this.$router.push('/admin/manage/source_manage/')\r\n                } catch (err) {\r\n                    errorHandler(err, this)\r\n                } finally {\r\n                    this.pending = false\r\n                }\r\n            },\r\n            async createOrUpdateSetting () {\r\n                this.pending = true\r\n\r\n                const origins = this.originList.map(item => {\r\n                    const { id, name, desc, type, packages, details } = item\r\n                    return {\r\n                        id,\r\n                        name,\r\n                        desc,\r\n                        type,\r\n                        packages,\r\n                        details\r\n                    }\r\n                })\r\n                const data = {\r\n                    origins,\r\n                    caches: this.cacheList\r\n                }\r\n\r\n                try {\r\n                    if (this.isCreating) {\r\n                        await this.createPackageSource(data)\r\n                    } else {\r\n                        await this.updatePackageSource(data)\r\n                    }\r\n                    this.$router.push('/admin/manage/source_manage/')\r\n                } catch (err) {\r\n                    errorHandler(err, this)\r\n                } finally {\r\n                    this.pending = false\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .source-edit {\r\n        padding-top: 20px;\r\n        height: calc(100% - 80px);\r\n    }\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditHeader.vue?vue&type=script&lang=js&\"","/**\r\n* Tencent is pleased to support the open source community by making 蓝鲸智云PaaS平台社区版 (BlueKing PaaS Community\r\n* Edition) available.\r\n* Copyright (C) 2017-2019 THL A29 Limited, a Tencent company. All rights reserved.\r\n* Licensed under the MIT License (the \"License\"); you may not use this file except in compliance with the License.\r\n* You may obtain a copy of the License at\r\n* http://opensource.org/licenses/MIT\r\n* Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on\r\n* an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the\r\n* specific language governing permissions and limitations under the License.\r\n*/\r\n<template>\r\n    <div class=\"edit-header\">\r\n        <div :class=\"['step-item', {\r\n            'active': $route.name === 'packageEdit',\r\n            'finished': $route.name === 'cacheEdit'\r\n        }]\">\r\n            <div class=\"step-content\">\r\n                <div class=\"num\">1</div>\r\n                <div class=\"title\">{{ i18n.setting + i18n.source }}</div>\r\n            </div>\r\n        </div>\r\n        <div :class=\"['step-item', {\r\n            'active': $route.name === 'cacheEdit'\r\n        }]\">\r\n            <div class=\"step-content\">\r\n                <div class=\"num\">2</div>\r\n                <div class=\"title\">{{ i18n.setting + i18n.cache }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import '@/utils/i18n.js'\r\n\r\n    export default {\r\n        name: 'EditHeader',\r\n        data () {\r\n            return {\r\n                i18n: {\r\n                    setting: gettext('配置'),\r\n                    source: gettext('主包源'),\r\n                    cache: gettext('本地缓存')\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .edit-header {\r\n        padding-bottom: 15px;\r\n        border-bottom: 1px solid #cacedb;\r\n        overflow: hidden;\r\n    }\r\n    .step-item {\r\n        float: left;\r\n        position: relative;\r\n        width: 50%;\r\n        font-size: 12px;\r\n        &:first-child {\r\n            left: 0;\r\n            padding-left: 80px;\r\n            &:after {\r\n                content: '';\r\n                position: absolute;\r\n                top: 6px;\r\n                left: 96px;\r\n                width: calc(100% - 88px);\r\n                height: 4px;\r\n                background: #e1e4eb;\r\n            }\r\n            .title {\r\n                left: 0;\r\n                text-align: left;\r\n                padding-left: 60px;\r\n            }\r\n        }\r\n        \r\n        &:last-child {\r\n            right: 0;\r\n            padding-right: 80px;\r\n            text-align: right;\r\n            &:after {\r\n                content: '';\r\n                position: absolute;\r\n                top: 6px;\r\n                right: 94px;\r\n                width: calc(100% - 80px);\r\n                height: 4px;\r\n                background: #e1e4eb;\r\n            }\r\n            .title {\r\n                right: 0;\r\n                text-align: right;\r\n                padding-right: 50px;\r\n            }\r\n        }\r\n        &.active {\r\n            .step-content {\r\n                .num {\r\n                    color: #3a84ff;\r\n                    background: #ffffff;\r\n                    border: 2px solid #3a84ff;\r\n                }\r\n                .title {\r\n                    color: #3a84ff;\r\n                }\r\n            }\r\n            &:after {\r\n                background: #3a84ff;\r\n            }\r\n        }\r\n        &.finished {\r\n            .step-content {\r\n                .num {\r\n                    color: #3a84ff;\r\n                    background: #3a84ff;\r\n                    border: 2px solid #3a84ff;\r\n                }\r\n                .title {\r\n                    color: #3a84ff;\r\n                }\r\n            }\r\n            &:after {\r\n                background: #3a84ff;\r\n            }\r\n        }\r\n        .step-content {\r\n            display: inline-block;\r\n            text-align: center;\r\n            height: 60px;\r\n            .num {\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                margin: 0 auto;\r\n                width: 16px;\r\n                height: 16px;\r\n                background: #e1e4e8;\r\n                color: #ffffff;\r\n                border-radius: 50%;\r\n            }\r\n            .title {\r\n                position: absolute;\r\n                margin-top: 10px;\r\n                color: #313238;\r\n                width: 100%;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n"],"sourceRoot":""}