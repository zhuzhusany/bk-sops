(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1074:
/*!**********************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/EditHeader.vue ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./EditHeader.vue?vue&type=template&id=1796e502&scoped=true& */1132),i=a(/*! ./EditHeader.vue?vue&type=script&lang=js& */851);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a(/*! ./EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true& */1075);var s=a(/*! ../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */1),c=Object(s.a)(i.default,n.a,n.b,!1,null,"1796e502",null);t.default=c.exports},1075:
/*!********************************************************************************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true& ***!
  \********************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib!../../../../../node_modules/sass-loader/lib/loader.js!../../../../../node_modules/vue-loader/lib??vue-loader-options!./EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true& */853);a.n(n).a},1076:
/*!***************************************************************************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true& ***!
  \***************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/lib!../../../../../node_modules/sass-loader/lib/loader.js!../../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true& */854);a.n(n).a},1101:
/*!************************************************************************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/index.vue?vue&type=template&id=e3f45efe&scoped=true& + 1 modules ***!
  \************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:this.loading,opacity:1},expression:"{ isLoading: loading, opacity: 1 }"}],staticClass:"source-edit"},[t("edit-header"),this._v(" "),t("router-view",{attrs:{"origin-list":this.originList,"cache-list":this.cacheList,pending:this.pending},on:{updateList:this.updateList,saveSetting:this.saveSetting}})],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},1132:
/*!*****************************************************************************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/EditHeader.vue?vue&type=template&id=1796e502&scoped=true& + 1 modules ***!
  \*****************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-header"},[a("div",{class:["step-item",{active:"packageEdit"===e.$route.name,finished:"cacheEdit"===e.$route.name}]},[a("div",{staticClass:"step-content"},[a("div",{staticClass:"num"},[e._v("1")]),e._v(" "),a("div",{staticClass:"title"},[e._v(e._s(e.i18n.setting+e.i18n.source))])])]),e._v(" "),a("div",{class:["step-item",{active:"cacheEdit"===e.$route.name}]},[a("div",{staticClass:"step-content"},[a("div",{staticClass:"num"},[e._v("2")]),e._v(" "),a("div",{staticClass:"title"},[e._v(e._s(e.i18n.setting+e.i18n.cache))])])])])},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},486:
/*!*****************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/index.vue ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./index.vue?vue&type=template&id=e3f45efe&scoped=true& */1101),i=a(/*! ./index.vue?vue&type=script&lang=js& */849);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a(/*! ./index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true& */1076);var s=a(/*! ../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */1),c=Object(s.a)(i.default,n.a,n.b,!1,null,"e3f45efe",null);t.default=c.exports},849:
/*!******************************************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../../node_modules/babel-loader/lib!../../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=script&lang=js& */850),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t.default=i.a},850:
/*!****************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/admin/manage/SourceEdit/index.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(/*! babel-runtime/regenerator */134)),i=d(a(/*! babel-runtime/helpers/asyncToGenerator */135)),r=d(a(/*! babel-runtime/helpers/extends */89));a(/*! @/utils/i18n.js */8);var s=a(/*! vuex */41),c=a(/*! @/utils/errorHandler.js */136),u=d(a(/*! @/utils/tools.js */192)),o=d(a(/*! ./EditHeader.vue */1074));function d(e){return e&&e.__esModule?e:{default:e}}t.default={name:"SourceEdit",components:{EditHeader:o.default},data:function(){return{sourceData:[],emptyData:!1,isCreating:!1,originList:[],cacheList:[],loading:!0,pending:!1}},created:function(){this.loadData()},methods:(0,r.default)({},(0,s.mapActions)("manage",["loadPackageSource","createPackageSource","updatePackageSource","deletePackageSource"]),{loadData:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.loadPackageSource();case 4:(a=t.sent).objects.length?(e.sourceData=a.objects,e.transformData(a.objects)):(e.emptyData=!0,e.isCreating=!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),(0,c.errorHandler)(t.t0,e);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}},t,e,[[1,8,11,14]])}))()},transformData:function(e){var t=[],a=[];e.forEach(function(e){"origin"===e.category?t.push(e):a.push(e)}),this.originList=t,this.cacheList=a},updateList:function(e,t){var a=u.default.deepClone(t);"originList"===e?this.originList=a:this.cacheList=a},saveSetting:function(){this.pending||(this.cacheList.length>0&&0===this.originList.length?this.$bkMessage({theme:"error",message:gettext("请添加主包源"),delay:1e4}):0===this.originList.length&&0===this.cacheList.length?this.isCreating?this.$bkMessage({theme:"error",message:gettext("请添加主包源"),delay:1e4}):this.deleteSetting():this.createOrUpdateSetting())},deleteSetting:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.pending=!0,a=e.sourceData.map(function(e){return{origin_source_id:e.origin_source_id,type:e.type,name:e.name}}),t.prev=2,t.next=5,e.deletePackageSource(a);case 5:e.$router.push("/admin/manage/source_manage/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),(0,c.errorHandler)(t.t0,e);case 11:return t.prev=11,e.pending=!1,t.finish(11);case 14:case"end":return t.stop()}},t,e,[[2,8,11,14]])}))()},createOrUpdateSetting:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a,i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.pending=!0,a=e.originList.map(function(e){return{id:e.id,name:e.name,desc:e.desc,type:e.type,packages:e.packages,details:e.details}}),i={origins:a,caches:e.cacheList},t.prev=3,!e.isCreating){t.next=9;break}return t.next=7,e.createPackageSource(i);case 7:t.next=11;break;case 9:return t.next=11,e.updatePackageSource(i);case 11:e.$router.push("/admin/manage/source_manage/"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),(0,c.errorHandler)(t.t0,e);case 17:return t.prev=17,e.pending=!1,t.finish(17);case 20:case"end":return t.stop()}},t,e,[[3,14,17,20]])}))()}})}},851:
/*!***********************************************************************************!*\
  !*** ./src/pages/admin/manage/SourceEdit/EditHeader.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../../node_modules/babel-loader/lib!../../../../../node_modules/vue-loader/lib??vue-loader-options!./EditHeader.vue?vue&type=script&lang=js& */852),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t.default=i.a},852:
/*!*********************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/admin/manage/SourceEdit/EditHeader.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(/*! @/utils/i18n.js */8),t.default={name:"EditHeader",data:function(){return{i18n:{setting:gettext("配置"),source:gettext("主包源"),cache:gettext("本地缓存")}}}}},853:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/admin/manage/SourceEdit/EditHeader.vue?vue&type=style&index=0&id=1796e502&lang=scss&scoped=true& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},854:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/admin/manage/SourceEdit/index.vue?vue&type=style&index=0&id=e3f45efe&lang=scss&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){}}]);
//# sourceMappingURL=29.js.map