(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1014:
/*!*****************************************************!*\
  !*** ./src/pages/task/TaskList/TaskCloneDialog.vue ***!
  \*****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./TaskCloneDialog.vue?vue&type=template&id=14f040da&scoped=true& */1141),i=a(/*! ./TaskCloneDialog.vue?vue&type=script&lang=js& */733);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./TaskCloneDialog.vue?vue&type=style&index=0&id=14f040da&lang=scss&scoped=true& */1015);var o=a(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */1),r=Object(o.a)(i.default,n.a,n.b,!1,null,"14f040da",null);t.default=r.exports},1015:
/*!***************************************************************************************************************!*\
  !*** ./src/pages/task/TaskList/TaskCloneDialog.vue?vue&type=style&index=0&id=14f040da&lang=scss&scoped=true& ***!
  \***************************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib??vue-loader-options!./TaskCloneDialog.vue?vue&type=style&index=0&id=14f040da&lang=scss&scoped=true& */735);a.n(n).a},1016:
/*!*****************************************************************************************************!*\
  !*** ./src/pages/task/TaskList/index.vue?vue&type=style&index=0&id=5a0bb192&lang=scss&scoped=true& ***!
  \*****************************************************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";var n=a(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=style&index=0&id=5a0bb192&lang=scss&scoped=true& */736);a.n(n).a},1119:
/*!**************************************************************************************************!*\
  !*** ./src/pages/task/TaskList/index.vue?vue&type=template&id=5a0bb192&scoped=true& + 1 modules ***!
  \**************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-container"},[a("div",{staticClass:"list-wrapper"},[a("BaseTitle",{attrs:{title:e.i18n.task_list}}),e._v(" "),a("div",{staticClass:"operation-area"},[a("div",{staticClass:"operation-area clearfix"},[a("bk-button",{staticClass:"task-btn",attrs:{theme:"primary"},on:{click:e.onCreateTask}},[e._v("\n                    "+e._s(e.i18n.create)+"\n                ")]),e._v(" "),a("div",{staticClass:"task-advanced-search"},[a("AdvanceSearch",{staticClass:"base-search",attrs:{"input-placeholader":e.i18n.taskNamePlaceholder},on:{onShow:e.onAdvanceShow,input:e.onSearchInput},model:{value:e.flowName,callback:function(t){e.flowName=t},expression:"flowName"}})],1)],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isAdvancedSerachShow,expression:"isAdvancedSerachShow"}],staticClass:"task-search"},[a("fieldset",{staticClass:"task-fieldset"},[a("div",{staticClass:"task-query-content"},[a("div",{staticClass:"query-content"},[a("span",{staticClass:"query-span"},[e._v(e._s(e.i18n.start_time))]),e._v(" "),a("bk-date-picker",{ref:"bkRanger",attrs:{placeholder:e.i18n.dateRange,type:"daterange"},on:{change:e.onChangeExecuteTime},model:{value:e.TimeRange,callback:function(t){e.TimeRange=t},expression:"TimeRange"}})],1),e._v(" "),a("div",{staticClass:"query-content"},[a("span",{staticClass:"query-span"},[e._v(e._s(e.i18n.task_type))]),e._v(" "),a("bk-select",{staticClass:"bk-select-inline",attrs:{"popover-width":260,searchable:!0,"is-loading":e.taskBasicInfoLoading,placeholder:e.i18n.taskTypePlaceholder},on:{clear:e.onClearCategory,selected:e.onSelectedCategory},model:{value:e.taskSync,callback:function(t){e.taskSync=t},expression:"taskSync"}},e._l(e.taskCategory,function(e,t){return a("bk-option",{key:t,attrs:{id:e.id,name:e.name}})}),1)],1),e._v(" "),a("div",{staticClass:"query-content"},[a("span",{staticClass:"query-span"},[e._v(e._s(e.i18n.createMethod))]),e._v(" "),a("bk-select",{staticClass:"bk-select-inline",attrs:{"popover-width":260,searchable:!0,"is-loading":e.taskBasicInfoLoading,placeholder:e.i18n.createMethodPlaceholder},on:{clear:e.onClearCreateMethod,selected:e.onSelectedCreateMethod},model:{value:e.createMethod,callback:function(t){e.createMethod=t},expression:"createMethod"}},e._l(e.taskCreateMethodList,function(e,t){return a("bk-option",{key:t,attrs:{id:e.id,name:e.name}})}),1)],1),e._v(" "),a("div",{staticClass:"query-content"},[a("span",{staticClass:"query-span"},[e._v(e._s(e.i18n.creator))]),e._v(" "),a("bk-input",{staticClass:"bk-input-inline",attrs:{clearable:!0,placeholder:e.i18n.creatorPlaceholder},model:{value:e.creator,callback:function(t){e.creator=t},expression:"creator"}})],1),e._v(" "),a("div",{staticClass:"query-content"},[a("span",{staticClass:"query-span"},[e._v(e._s(e.i18n.executor))]),e._v(" "),a("bk-input",{staticClass:"bk-input-inline",attrs:{clearable:!0,placeholder:e.i18n.executorPlaceholder},model:{value:e.executor,callback:function(t){e.executor=t},expression:"executor"}})],1),e._v(" "),a("div",{staticClass:"query-content"},[a("span",{staticClass:"query-span"},[e._v(e._s(e.i18n.status))]),e._v(" "),a("bk-select",{staticClass:"bk-select-inline",attrs:{"popover-width":260,searchable:!0,"is-loading":e.taskBasicInfoLoading,placeholder:e.i18n.statusPlaceholder},on:{clear:e.onClearStatus,selected:e.onSelectedStatus},model:{value:e.statusSync,callback:function(t){e.statusSync=t},expression:"statusSync"}},e._l(e.statusList,function(e,t){return a("bk-option",{key:t,attrs:{id:e.id,name:e.name}})}),1)],1),e._v(" "),a("div",{staticClass:"query-button"},[a("bk-button",{staticClass:"query-primary",attrs:{theme:"primary"},on:{click:e.searchInputhandler}},[e._v(e._s(e.i18n.query))]),e._v(" "),a("bk-button",{staticClass:"query-cancel",on:{click:e.onResetForm}},[e._v(e._s(e.i18n.reset))])],1)])])]),e._v(" "),a("div",{staticClass:"task-table-content"},[a("bk-table",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.listLoading,opacity:1},expression:"{ isLoading: listLoading, opacity: 1 }"}],attrs:{data:e.taskList,pagination:e.pagination},on:{"page-change":e.onPageChange}},[a("bk-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.task_name,prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"task-name",attrs:{title:t.row.name,to:"/taskflow/execute/"+e.cc_id+"/?instance_id="+t.row.id}},[e._v("\n                            "+e._s(t.row.name)+"\n                        ")])]}}])}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.start_time,prop:"category_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.start_time||"--")+"\n                    ")]}}])}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.finish_time},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.finish_time||"--")+"\n                    ")]}}])}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.task_type,prop:"category_name"}}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.creator,prop:"creator_name",width:"120"}}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.executor,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.executor_name||"--")+"\n                    ")]}}])}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.createMethod,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.transformCreateMethod(t.row.create_method))+"\n                    ")]}}])}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.status,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"task-status"},[a("span",{class:e.executeStatus[t.$index]&&e.executeStatus[t.$index].cls}),e._v(" "),e.executeStatus[t.$index]?a("span",{staticClass:"task-status-text"},[e._v(e._s(e.executeStatus[t.$index].text))]):e._e()])]}}])}),e._v(" "),a("bk-table-column",{attrs:{label:e.i18n.operation,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"task-operation"},[a("a",{staticClass:"task-operation-clone",attrs:{href:"javascript:void(0);"},on:{click:function(a){return a.preventDefault(),e.onCloneTaskClick(t.row.id,t.row.name)}}},[e._v("\n                                "+e._s(e.i18n.clone)+"\n                            ")]),e._v(" "),a("a",{staticClass:"task-operation-delete",attrs:{href:"javascript:void(0);"},on:{click:function(a){return a.preventDefault(),e.onDeleteTask(t.row.id,t.row.name)}}},[e._v("\n                                "+e._s(e.i18n.delete)+"\n                            ")])])]}}])}),e._v(" "),a("div",{staticClass:"empty-data",attrs:{slot:"empty"},slot:"empty"},[a("NoData",{attrs:{message:e.i18n.empty}})],1)],1)],1)],1),e._v(" "),a("CopyrightFooter"),e._v(" "),a("TaskCreateDialog",{attrs:{common:e.common,cc_id:e.cc_id,"is-new-task-dialog-show":e.isNewTaskDialogShow,"business-info-loading":e.businessInfoLoading,"create-entrance":!0,"task-category":e.taskCategory},on:{onCreateTaskCancel:e.onCreateTaskCancel}}),e._v(" "),a("TaskCloneDialog",{attrs:{"is-task-clone-dialog-show":e.isTaskCloneDialogShow,"task-name":e.theCloneTaskName,pending:e.pending.clone},on:{confirm:e.onCloneConfirm,cancel:e.onCloneCancel}}),e._v(" "),a("bk-dialog",{attrs:{width:"400","ext-cls":"common-dialog",theme:"primary","mask-close":!1,"header-position":"left",title:e.i18n.delete,value:e.isDeleteDialogShow},on:{confirm:e.onDeleteConfirm,cancel:e.onDeleteCancel}},[a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.pending.delete,opacity:1},expression:"{ isLoading: pending.delete, opacity: 1 }"}],staticClass:"dialog-content"},[e._v("\n            "+e._s(e.i18n.deleleTip+'"'+e.theDeleteTaskName+'"?')+"\n        ")])])],1)},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},1141:
/*!************************************************************************************************************!*\
  !*** ./src/pages/task/TaskList/TaskCloneDialog.vue?vue&type=template&id=14f040da&scoped=true& + 1 modules ***!
  \************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/*! exports used: render, staticRenderFns */function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("bk-dialog",{attrs:{width:"600","ext-cls":"common-dialog",theme:"primary","mask-close":!1,"header-position":"left",title:e.i18n.title,value:e.isTaskCloneDialogShow},on:{confirm:e.onConfirm,cancel:e.onCancel}},[a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.pending,opacity:1},expression:"{ isLoading: pending, opacity: 1 }"}],staticClass:"clone-wrapper"},[a("div",{staticClass:"common-form-item"},[a("label",[e._v(e._s(e.i18n.template))]),e._v(" "),a("div",{staticClass:"common-form-content"},[a("bk-input",{directives:[{name:"validate",rawName:"v-validate",value:e.taskNameRule,expression:"taskNameRule"}],attrs:{name:"taskName"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),e.errors.has("taskName")?a("span",{staticClass:"common-error-tip error-msg"},[e._v(e._s(e.errors.first("taskName")))]):e._e()],1)])])])},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},470:
/*!*******************************************!*\
  !*** ./src/pages/task/TaskList/index.vue ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! ./index.vue?vue&type=template&id=5a0bb192&scoped=true& */1119),i=a(/*! ./index.vue?vue&type=script&lang=js& */728);for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a(/*! ./index.vue?vue&type=style&index=0&id=5a0bb192&lang=scss&scoped=true& */1016);var o=a(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */1),r=Object(o.a)(i.default,n.a,n.b,!1,null,"5a0bb192",null);t.default=r.exports},728:
/*!********************************************************************!*\
  !*** ./src/pages/task/TaskList/index.vue?vue&type=script&lang=js& ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/vue-loader/lib??vue-loader-options!./index.vue?vue&type=script&lang=js& */729),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},729:
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskList/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(/*! babel-runtime/core-js/promise */42)),i=v(a(/*! babel-runtime/regenerator */134)),s=v(a(/*! babel-runtime/helpers/asyncToGenerator */135)),o=v(a(/*! babel-runtime/helpers/extends */89));a(/*! @/utils/i18n.js */8);var r=a(/*! vuex */41),c=a(/*! @/utils/errorHandler.js */136),l=v(a(/*! @/utils/tools.js */192)),u=v(a(/*! @/components/layout/CopyrightFooter.vue */518)),d=v(a(/*! @/components/common/base/BaseTitle.vue */519)),h=v(a(/*! @/components/common/base/AdvanceSearch.vue */520)),p=v(a(/*! ./TaskCreateDialog.vue */899)),m=v(a(/*! @/components/common/base/NoData.vue */494)),f=v(a(/*! moment-timezone */505)),k=v(a(/*! ./TaskCloneDialog.vue */1014));function v(e){return e&&e.__esModule?e:{default:e}}t.default={name:"TaskList",components:{CopyrightFooter:u.default,BaseTitle:d.default,AdvanceSearch:h.default,NoData:m.default,TaskCreateDialog:p.default,TaskCloneDialog:k.default},props:["cc_id","common","create_method"],data:function(){return{listLoading:!0,templateId:this.$route.query.template_id,taskCategory:[],activeTaskCategory:void 0,searchStr:"",executeStatus:[],TimeRange:["",""],totalPage:1,isDeleteDialogShow:!1,shapeShow:!1,isAdvancedSerachShow:!1,theDeleteTaskId:void 0,theDeleteTaskName:"",isTaskCloneDialogShow:!1,isNewTaskDialogShow:!1,businessInfoLoading:!0,theCloneTaskName:"",theCloneTaskId:void 0,pending:{delete:!1,clone:!1},i18n:{allCategory:gettext("全部"),placeholder:gettext("请输入ID或任务名称"),task_list:gettext("任务记录"),task_name:gettext("任务名称"),start_time:gettext("执行开始"),finish_time:gettext("执行结束"),task_type:gettext("任务分类"),creator:gettext("创建人"),executor:gettext("执行人"),status:gettext("状态"),operation:gettext("操作"),clone:gettext("克隆"),delete:gettext("删除"),deleleTip:gettext("确认删除"),total:gettext("共"),item:gettext("条记录"),comma:gettext("，"),currentPageTip:gettext("当前第"),page:gettext("页"),taskNamePlaceholder:gettext("请输入任务名称"),taskTypePlaceholder:gettext("请选择分类"),creatorPlaceholder:gettext("请输入创建人"),executorPlaceholder:gettext("请输入执行人"),statusPlaceholder:gettext("请选择状态"),query:gettext("搜索"),reset:gettext("清空"),createMethod:gettext("创建方式"),createMethodApp:gettext("应用内"),createMethodAppmaker:gettext("轻应用"),createMethodPlaceholder:gettext("请选择创建方式"),advanceSearch:gettext("高级搜索"),executing:gettext("执行中"),pauseState:gettext("暂停"),create:gettext("新建"),dateRange:gettext("选择日期时间范围")},executeStartTime:void 0,executeEndTime:void 0,flowName:void 0,category:void 0,creator:void 0,executor:void 0,taskSync:"",statusList:[{id:"nonExecution",name:gettext("未执行")},{id:"runing",name:gettext("未完成")},{id:"finished",name:gettext("完成")}],taskBasicInfoLoading:!0,isStarted:void 0,isFinished:void 0,statusSync:"",taskCreateMethodList:[],createMethod:this.create_method||"",pagination:{current:1,count:0,limit:15,"limit-list":[15],"show-limit":!1}}},computed:(0,o.default)({},(0,r.mapState)({taskList:function(e){return e.taskList.taskListData},businessTimezone:function(e){return e.businessTimezone}})),created:function(){this.getData(),this.onSearchInput=l.default.debounce(this.searchInputhandler,500)},methods:(0,o.default)({},(0,r.mapActions)("template/",["loadBusinessBaseInfo"]),(0,r.mapActions)("task/",["getInstanceStatus","loadCreateMethod"]),(0,r.mapActions)("taskList/",["loadTaskList","deleteTask","cloneTask"]),(0,r.mapMutations)("template/",["setBusinessBaseInfo"]),(0,r.mapMutations)("taskList/",["setTaskListData"]),{getTaskList:function(){var e=this;return(0,s.default)(i.default.mark(function t(){var a,n,s,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return""===e.executeStartTime&&(e.executeStartTime=void 0),e.listLoading=!0,e.executeStatus=[],t.prev=3,a={limit:e.pagination.limit,offset:(e.pagination.current-1)*e.pagination.limit,category:e.activeTaskCategory,template_id:e.templateId,common:e.common,pipeline_instance__creator__contains:e.creator,pipeline_instance__executor__contains:e.executor,pipeline_instance__name__contains:e.flowName,pipeline_instance__is_started:e.isStarted,pipeline_instance__is_finished:e.isFinished,create_method:e.createMethod||void 0},e.executeEndTime&&(e.common?(a.pipeline_template__start_time__gte=(0,f.default)(e.executeStartTime).format("YYYY-MM-DD"),a.pipeline_template__start_time__lte=(0,f.default)(e.executeEndTime).add("1","d").format("YYYY-MM-DD")):(a.pipeline_instance__start_time__gte=f.default.tz(e.executeStartTime,e.businessTimezone).format("YYYY-MM-DD"),a.pipeline_instance__start_time__lte=f.default.tz(e.executeEndTime,e.businessTimezone).add("1","d").format("YYYY-MM-DD"))),t.next=8,e.loadTaskList(a);case 8:n=t.sent,s=n.objects,e.pagination.count=n.meta.total_count,o=Math.ceil(e.pagination.count/e.pagination.limit),e.totalPage=o||1,e.executeStatus=s.map(function(t,a){var n={};return t.is_finished?(n.cls="finished bk-icon icon-check-circle-shape",n.text=gettext("完成")):t.is_started?(n.cls="loading common-icon-loading",e.getExecuteDetail(t,a)):(n.cls="created common-icon-dark-circle-shape",n.text=gettext("未执行")),n}),e.setTaskListData(s),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),(0,c.errorHandler)(t.t0,e);case 20:return t.prev=20,e.listLoading=!1,t.finish(20);case 23:case"end":return t.stop()}},t,e,[[3,17,20,23]])}))()},getExecuteDetail:function(e,t){var a=this;return(0,s.default)(i.default.mark(function n(){var s,o,r,l;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s={instance_id:e.id,cc_id:e.business.cc_id},n.prev=1,n.next=4,a.getInstanceStatus(s);case 4:if(!(o=n.sent).result){n.next=30;break}r=o.data.state,l={},n.t0=r,n.next="RUNNING"===n.t0?11:"BLOCKED"===n.t0?11:"SUSPENDED"===n.t0?14:"NODE_SUSPENDED"===n.t0?17:"FAILED"===n.t0?20:"REVOKED"===n.t0?23:26;break;case 11:return l.cls="running common-icon-dark-circle-ellipsis",l.text=gettext("执行中"),n.abrupt("break",27);case 14:return l.cls="execute common-icon-dark-circle-pause",l.text=gettext("暂停"),n.abrupt("break",27);case 17:return l.cls="execute common-icon-dark-circle-pause",l.text=gettext("节点暂停"),n.abrupt("break",27);case 20:return l.cls="failed common-icon-dark-circle-close",l.text=gettext("失败"),n.abrupt("break",27);case 23:return l.cls="revoke common-icon-dark-circle-shape",l.text=gettext("撤销"),n.abrupt("break",27);case 26:l.text=gettext("未知");case 27:a.executeStatus.splice(t,1,l),n.next=31;break;case 30:(0,c.errorHandler)(o,a);case 31:n.next=36;break;case 33:n.prev=33,n.t1=n.catch(1),(0,c.errorHandler)(n.t1,a);case 36:case"end":return n.stop()}},n,a,[[1,33]])}))()},getBizBaseInfo:function(){var e=this;return(0,s.default)(i.default.mark(function t(){var a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadBusinessBaseInfo();case 3:a=t.sent,e.taskCategory=a.task_categories.map(function(e){return{id:e.value,name:e.name}}),e.setBusinessBaseInfo(a),e.taskBasicInfoLoading=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,c.errorHandler)(t.t0,e);case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()},onCategoryClick:function(e){this.activeTaskCategory=e,this.pagination.current=1,this.getTaskList()},searchInputhandler:function(){this.pagination.current=1,this.getTaskList()},onDeleteTask:function(e,t){this.theDeleteTaskId=e,this.theDeleteTaskName=t,this.isDeleteDialogShow=!0},onDeleteConfirm:function(){var e=this;return(0,s.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pending.delete){t.next=2;break}return t.abrupt("return");case 2:return e.pending.delete=!0,t.prev=3,t.next=6,e.deleteTask(e.theDeleteTaskId);case 6:return e.theDeleteTaskId=void 0,e.theDeleteTaskName="",e.pagination.current>1&&e.totalPage===e.pagination.current&&e.pagination.count-(e.totalPage-1)*e.pagination.limit==1&&(e.pagination.current-=1),t.next=11,e.getTaskList();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),(0,c.errorHandler)(t.t0,e);case 16:return t.prev=16,e.isDeleteDialogShow=!1,e.pending.delete=!1,t.finish(16);case 20:case"end":return t.stop()}},t,e,[[3,13,16,20]])}))()},onDeleteCancel:function(){this.theDeleteTaskId=void 0,this.theDeleteTaskName="",this.isDeleteDialogShow=!1},onCloneTaskClick:function(e,t){this.isTaskCloneDialogShow=!0,this.theCloneTaskId=e,this.theCloneTaskName=t},onCloneConfirm:function(e){var t=this;return(0,s.default)(i.default.mark(function a(){var n,s;return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.pending.clone){a.next=2;break}return a.abrupt("return");case 2:return t.pending.clone=!0,n={name:e,task_id:t.theCloneTaskId},a.prev=4,a.next=7,t.cloneTask(n);case 7:s=a.sent,t.$router.push({path:"/taskflow/execute/"+t.cc_id+"/",query:{instance_id:s.data.new_instance_id}}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),(0,c.errorHandler)(a.t0,t);case 14:case"end":return a.stop()}},a,t,[[4,11]])}))()},onCloneCancel:function(){this.isTaskCloneDialogShow=!1,this.theCloneTaskName=""},onClearCategory:function(){this.activeTaskCategory=void 0},onSelectedCategory:function(e,t){this.activeTaskCategory=e},onSelectedCreateMethod:function(e){this.createMethod=e},onSelectedStatus:function(e){this.isStarted="nonExecution"!==e,this.isFinished="finished"===e},onClearCreateMethod:function(){this.createMethod=""},onClearStatus:function(){this.isStarted=void 0,this.isFinished=void 0},onPageChange:function(e){this.pagination.current=e,this.getTaskList()},onResetForm:function(){this.TimeRange=["",""],this.isStarted=void 0,this.isFinished=void 0,this.createMethod="",this.creator=void 0,this.executor=void 0,this.flowName=void 0,this.statusSync="",this.taskSync="",this.executeStartTime=void 0,this.executeEndTime=void 0,this.searchInputhandler()},onChangeExecuteTime:function(e,t){this.executeStartTime=e[0],this.executeEndTime=e[1]},getCreateMethod:function(){var e=this;return(0,s.default)(i.default.mark(function t(){var a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadCreateMethod();case 3:a=t.sent,e.taskCreateMethodList=a.data.map(function(e){return{id:e.value,name:e.name}}),e.createMethod=e.create_method||"",t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),(0,c.errorHandler)(t.t0,e);case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},getData:function(){var e=this;return(0,s.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.default.all([e.getTaskList(),e.getCreateMethod(),e.getBizBaseInfo()]).catch(function(t){(0,c.errorHandler)(t,e)});case 1:case"end":return t.stop()}},t,e)}))()},transformCreateMethod:function(e){return 0===this.taskCreateMethodList.length?"":this.taskCreateMethodList.find(function(t){return t.id===e}).name},onAdvanceShow:function(){this.isAdvancedSerachShow=!this.isAdvancedSerachShow},onCreateTask:function(){this.isNewTaskDialogShow=!0},onCreateTaskCancel:function(){this.isNewTaskDialogShow=!1}})}},733:
/*!******************************************************************************!*\
  !*** ./src/pages/task/TaskList/TaskCloneDialog.vue?vue&type=script&lang=js& ***!
  \******************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module exports are unknown */function(e,t,a){"use strict";a.r(t);var n=a(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/vue-loader/lib??vue-loader-options!./TaskCloneDialog.vue?vue&type=script&lang=js& */734),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=i.a},734:
/*!****************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskList/TaskCloneDialog.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(/*! @/utils/i18n.js */8);var n=a(/*! @/constants/index.js */193);t.default={name:"TaskCloneDialog",props:["isTaskCloneDialogShow","taskName","pending"],data:function(){return{name:"copy"+this.taskName.slice(0,n.STRING_LENGTH.TASK_NAME_MAX_LENGTH-4),taskNameRule:{required:!0,max:n.STRING_LENGTH.TASK_NAME_MAX_LENGTH,regex:n.NAME_REG},i18n:{title:gettext("任务克隆"),template:gettext("任务名称")}}},watch:{taskName:function(e){this.name="copy"+e.slice(0,n.STRING_LENGTH.TASK_NAME_MAX_LENGTH-4)}},methods:{onConfirm:function(){var e=this;this.$validator.validateAll().then(function(t){t&&(e.name=e.name.trim(),e.$emit("confirm",e.name))})},onCancel:function(){this.$emit("cancel")}}}},735:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskList/TaskCloneDialog.vue?vue&type=style&index=0&id=14f040da&lang=scss&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){},736:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib!./node_modules/sass-loader/lib/loader.js!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/task/TaskList/index.vue?vue&type=style&index=0&id=5a0bb192&lang=scss&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,a){}}]);
//# sourceMappingURL=30.js.map