/* eslint-disable */
export default {
    namespaced: true,
    state: {},
    mutations: {},
    actions: {
        getTaskList ({ commit, state, dispatch }, params, config) {
            // 状态列表如果任务的状态是未完成，则调用任务状态接口
            const STATUS_CLASS = {"FINISHED":"task-icon more", "FAILED":"task-icon close", "SUSPENDED": "task-icon pause", "REVOKED": "task-icon close"}
            taskList.objects.forEach((task) => {
                if (!task["is_started"]) {
                    task["status_class"] = 'task-icon circle'
                } else {
                    if (task["is_finished"]) {
                        // const url = `http://paas.blueking.yovole.tech/o/bk_sops/taskflow/api/status/2/?instance_id=${task["id"]}`
                        task["status_class"] = 'FINISHED'
                    } else {
                        task["status_class"] = taskStatus[task["id"]]["data"]["state"]
                    }
                    task["status_class"] = STATUS_CLASS[task["status_class"]]
                }
            })

            return taskList.objects
            // return http.get(
            //     `${AJAX_URL_PREFIX}api/v3/taskflow/?limit=15&offset=0&q=&business__cc_id=2
            // ).then(response => {
            //     const data = response.objects || []
            //     console.log(data)
            //     return data
            // })
        }
    }
}

const taskList = {"meta": {"limit": 15, "next": "/o/bk_sops/api/v3/taskflow/?q=&limit=15&business__cc_id=2&offset=15", "offset": 0, "previous": null, "total_count": 495}, "objects": [{"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-12 11:39:01 +0800", "creator_name": "zhuyonghua", "current_flow": "execute_task", "elapsed_time": 7, "executor_name": "zhuyonghua", "finish_time": null, "flow_type": "common", "id": 1088, "instance_id": 1088, "is_deleted": false, "is_finished": false, "is_started": true, "name": "clone20190412030401", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1088/", "start_time": "2019-04-12 11:39:04 +0800", "template_id": "82"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-12 11:34:50 +0800", "creator_name": "zhuyonghua", "current_flow": "execute_task", "elapsed_time": 259, "executor_name": "zhuyonghua", "finish_time": null, "flow_type": "common", "id": 1087, "instance_id": 1087, "is_deleted": false, "is_finished": false, "is_started": true, "name": "移动端测试模板(勿删)_20190412113154", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1087/", "start_time": "2019-04-12 11:34:52 +0800", "template_id": "82"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-12 10:23:05 +0800", "creator_name": "zhuyonghua", "current_flow": "execute_task", "elapsed_time": 0, "executor_name": "", "finish_time": null, "flow_type": "common", "id": 1086, "instance_id": 1086, "is_deleted": false, "is_finished": false, "is_started": false, "name": "测试发邮件_20190412102003", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1086/", "start_time": null, "template_id": "5"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-12 09:39:43 +0800", "creator_name": "yuyi", "current_flow": "finished", "elapsed_time": 19, "executor_name": "yuyi", "finish_time": "2019-04-12 09:40:12 +0800", "flow_type": "common", "id": 1085, "instance_id": 1085, "is_deleted": false, "is_finished": true, "is_started": true, "name": "Python_SAAS_deployment_20190412093545", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1085/", "start_time": "2019-04-12 09:39:53 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-11 18:30:38 +0800", "creator_name": "yuyi", "current_flow": "finished", "elapsed_time": 25, "executor_name": "yuyi", "finish_time": "2019-04-11 18:31:05 +0800", "flow_type": "common", "id": 1084, "instance_id": 1084, "is_deleted": false, "is_finished": true, "is_started": true, "name": "Python_SAAS_deployment_20190411182904", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1084/", "start_time": "2019-04-11 18:30:40 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-11 18:28:12 +0800", "creator_name": "yuyi", "current_flow": "finished", "elapsed_time": 19, "executor_name": "yuyi", "finish_time": "2019-04-11 18:28:43 +0800", "flow_type": "common", "id": 1083, "instance_id": 1083, "is_deleted": false, "is_finished": true, "is_started": true, "name": "Gerrit项目打tag_20190411182728", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1083/", "start_time": "2019-04-11 18:28:24 +0800", "template_id": "75"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-11 18:09:32 +0800", "creator_name": "yuyi", "current_flow": "execute_task", "elapsed_time": 62964, "executor_name": "yuyi", "finish_time": null, "flow_type": "common", "id": 1082, "instance_id": 1082, "is_deleted": false, "is_finished": false, "is_started": true, "name": "clone20190411100432", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1082/", "start_time": "2019-04-11 18:09:47 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-11 18:01:46 +0800", "creator_name": "yuyi", "current_flow": "execute_task", "elapsed_time": 63410, "executor_name": "yuyi", "finish_time": null, "flow_type": "common", "id": 1080, "instance_id": 1080, "is_deleted": false, "is_finished": false, "is_started": true, "name": "clone20190411100446", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1080/", "start_time": "2019-04-11 18:02:21 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-11 18:00:00 +0800", "creator_name": "yuyi", "current_flow": "execute_task", "elapsed_time": 63540, "executor_name": "yuyi", "finish_time": null, "flow_type": "common", "id": 1079, "instance_id": 1079, "is_deleted": false, "is_finished": false, "is_started": true, "name": "Python_SAAS_deployment_20190411165750", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1079/", "start_time": "2019-04-11 18:00:11 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "24", "create_method": "app_maker", "create_time": "2019-04-03 13:39:08 +0800", "creator_name": "zhuyahui", "current_flow": "finished", "elapsed_time": 71, "executor_name": "zhuyahui", "finish_time": "2019-04-03 13:40:23 +0800", "flow_type": "common", "id": 1071, "instance_id": 1071, "is_deleted": false, "is_finished": true, "is_started": true, "name": "Python_SAAS_deployment_20190403133622", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1071/", "start_time": "2019-04-03 13:39:12 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "34", "create_method": "app_maker", "create_time": "2019-04-03 13:37:43 +0800", "creator_name": "zhuyahui", "current_flow": "finished", "elapsed_time": 19, "executor_name": "zhuyahui", "finish_time": "2019-04-03 13:38:06 +0800", "flow_type": "common", "id": 1070, "instance_id": 1070, "is_deleted": false, "is_finished": true, "is_started": true, "name": "Gerrit项目打tag_20190403133443", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1070/", "start_time": "2019-04-03 13:37:47 +0800", "template_id": "75"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-03 09:59:22 +0800", "creator_name": "mayan", "current_flow": "finished", "elapsed_time": 109, "executor_name": "mayan", "finish_time": "2019-04-03 10:01:39 +0800", "flow_type": "common", "id": 1069, "instance_id": 1069, "is_deleted": false, "is_finished": true, "is_started": true, "name": "clone20190403010422", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1069/", "start_time": "2019-04-03 09:59:50 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "34", "create_method": "app_maker", "create_time": "2019-04-03 09:57:37 +0800", "creator_name": "mayan", "current_flow": "finished", "elapsed_time": 17, "executor_name": "mayan", "finish_time": "2019-04-03 09:57:59 +0800", "flow_type": "common", "id": 1068, "instance_id": 1068, "is_deleted": false, "is_finished": true, "is_started": true, "name": "Gerrit项目打tag_20190403095442", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1068/", "start_time": "2019-04-03 09:57:42 +0800", "template_id": "75"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-03 09:09:31 +0800", "creator_name": "mayan", "current_flow": "finished", "elapsed_time": 73, "executor_name": "mayan", "finish_time": "2019-04-03 09:11:46 +0800", "flow_type": "common", "id": 1067, "instance_id": 1067, "is_deleted": false, "is_finished": true, "is_started": true, "name": "clone20190403010431", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1067/", "start_time": "2019-04-03 09:10:33 +0800", "template_id": "34"}, {"business": {"cc_company": "", "cc_id": 2, "cc_name": "蓝鲸", "cc_owner": "", "executor": "", "id": 1, "life_cycle": "2", "resource_uri": "/o/bk_sops/api/v3/business/2/", "time_zone": "Asia/Shanghai"}, "category": "OpsTools", "category_name": "运维工具", "create_info": "0", "create_method": "app", "create_time": "2019-04-02 15:32:38 +0800", "creator_name": "mayan", "current_flow": "finished", "elapsed_time": 82, "executor_name": "mayan", "finish_time": "2019-04-02 15:34:07 +0800", "flow_type": "common", "id": 1066, "instance_id": 1066, "is_deleted": false, "is_finished": true, "is_started": true, "name": "clone20190402070438", "pipeline_instance": "", "resource_uri": "/o/bk_sops/api/v3/taskflow/1066/", "start_time": "2019-04-02 15:32:45 +0800", "template_id": "34"}]}
const taskStatus = {"1088": {"data": {"retry": 0, "name": "<class 'pipeline.core.pipeline.Pipeline'>", "finish_time": "2019-04-12 11:39:09 +0800", "skip": false, "start_time": "2019-04-12 11:39:05 +0800", "children": {"node46c2b9e6559532c79669d4d91113": {"retry": 0, "name": "<class 'pipeline.core.flow.activity.ServiceActivity'>", "finish_time": "", "skip": false, "start_time": "2019-04-12 11:39:05 +0800", "children": {}, "elapsed_time": 944, "state": "RUNNING", "version": "ea23e9b83cb33802ab69d26917cae3c9", "error_ignorable": false, "id": "node46c2b9e6559532c79669d4d91113", "loop": 1}, "node299f53ae71f634619809f21850d4": {"retry": 0, "name": "<class 'pipeline.core.flow.event.EmptyStartEvent'>", "finish_time": "2019-04-12 11:39:05 +0800", "skip": false, "start_time": "2019-04-12 11:39:05 +0800", "children": {}, "elapsed_time": 1, "state": "FINISHED", "version": "7c1db2cdb32037a7a95a5efa5d683681", "error_ignorable": false, "id": "node299f53ae71f634619809f21850d4", "loop": 1}}, "elapsed_time": 4, "state": "REVOKED", "version": "", "error_ignorable": false, "id": "nodead02f480831d3813a3dbedc2fcb7", "loop": 1}, "result": true}
                    ,"1087": {"data": {"retry": 0, "name": "<class 'pipeline.core.pipeline.Pipeline'>", "finish_time": "", "skip": false, "start_time": "2019-04-12 11:34:52 +0800", "children": {"nodefc33aebbbae7349192e9dbdd091e": {"retry": 0, "name": "<class 'pipeline.core.flow.event.EmptyStartEvent'>", "finish_time": "2019-04-12 11:34:52 +0800", "skip": false, "start_time": "2019-04-12 11:34:52 +0800", "children": {}, "elapsed_time": 1, "state": "FINISHED", "version": "b8d388ed5bb63d3a943a4598ca4d58e9", "error_ignorable": false, "id": "nodefc33aebbbae7349192e9dbdd091e", "loop": 1}, "node476538b7007731edbd3ae7937bbc": {"retry": 0, "name": "<class 'pipeline.core.flow.activity.ServiceActivity'>", "finish_time": "", "skip": false, "start_time": "2019-04-12 11:34:52 +0800", "children": {}, "elapsed_time": 1197, "state": "RUNNING", "version": "b04bf515e2073f31aff49f48f3984321", "error_ignorable": false, "id": "node476538b7007731edbd3ae7937bbc", "loop": 1}}, "elapsed_time": 1197, "state": "SUSPENDED", "version": "", "error_ignorable": false, "id": "nodef89b572e7ff536a995b789b13a8a", "loop": 1}, "result": true}
                    ,"1082": {"data": {"retry": 0, "name": "<class 'pipeline.core.pipeline.Pipeline'>", "finish_time": "", "skip": false, "start_time": "2019-04-11 18:09:47 +0800", "children": {"nodeb6f532e38bbf36a783a6c613c052": {"retry": 0, "name": "<class 'pipeline.core.flow.event.EmptyStartEvent'>", "finish_time": "2019-04-11 18:09:48 +0800", "skip": false, "start_time": "2019-04-11 18:09:48 +0800", "children": {}, "elapsed_time": 1, "state": "FINISHED", "version": "4dcade9f53ca35d185b504e1baf2bbb0", "error_ignorable": false, "id": "nodeb6f532e38bbf36a783a6c613c052", "loop": 1}, "node2b74ebcb294031b2a5b044125a7c": {"retry": 0, "name": "<class 'pipeline.core.flow.activity.ServiceActivity'>", "finish_time": "2019-04-11 18:09:54 +0800", "skip": false, "start_time": "2019-04-11 18:09:48 +0800", "children": {}, "elapsed_time": 6, "state": "FAILED", "version": "197517c593543cb0841a308954bbdd9a", "error_ignorable": false, "id": "node2b74ebcb294031b2a5b044125a7c", "loop": 1}}, "elapsed_time": 63902, "state": "FAILED", "version": "", "error_ignorable": false, "id": "nodee62c105147d7346bb66c99666116", "loop": 1}, "result": true}
                    ,"1080": {"data": {"retry": 0, "name": "<class 'pipeline.core.pipeline.Pipeline'>", "finish_time": "", "skip": false, "start_time": "2019-04-11 18:02:21 +0800", "children": {"nodee5765eada7f430d4ba5ee3a2701b": {"retry": 0, "name": "<class 'pipeline.core.flow.activity.ServiceActivity'>", "finish_time": "2019-04-11 18:02:27 +0800", "skip": false, "start_time": "2019-04-11 18:02:21 +0800", "children": {}, "elapsed_time": 6, "state": "FAILED", "version": "512c1b944cb23f4eb230d648485ae98f", "error_ignorable": false, "id": "nodee5765eada7f430d4ba5ee3a2701b", "loop": 1}, "node1d74f75e5d973f639aa3147a9935": {"retry": 0, "name": "<class 'pipeline.core.flow.event.EmptyStartEvent'>", "finish_time": "2019-04-11 18:02:21 +0800", "skip": false, "start_time": "2019-04-11 18:02:21 +0800", "children": {}, "elapsed_time": 1, "state": "FINISHED", "version": "404cc52e07cd381cbf51a1e108ba5c1a", "error_ignorable": false, "id": "node1d74f75e5d973f639aa3147a9935", "loop": 1}}, "elapsed_time": 64348, "state": "FAILED", "version": "", "error_ignorable": false, "id": "noded3566109e4c733aaa86f1d00aabf", "loop": 1}, "result": true}
                    ,"1079": {"data": {"retry": 0, "name": "<class 'pipeline.core.pipeline.Pipeline'>", "finish_time": "", "skip": false, "start_time": "2019-04-11 18:00:12 +0800", "children": {"node8172b17501cd30c2844b21688b0f": {"retry": 0, "name": "<class 'pipeline.core.flow.activity.ServiceActivity'>", "finish_time": "2019-04-11 18:00:23 +0800", "skip": false, "start_time": "2019-04-11 18:00:12 +0800", "children": {}, "elapsed_time": 11, "state": "FAILED", "version": "ded24c7eef123739859e93ca0ce3e603", "error_ignorable": false, "id": "node8172b17501cd30c2844b21688b0f", "loop": 1}, "node04eac022b85a34608d954dc48329": {"retry": 0, "name": "<class 'pipeline.core.flow.event.EmptyStartEvent'>", "finish_time": "2019-04-11 18:00:12 +0800", "skip": false, "start_time": "2019-04-11 18:00:12 +0800", "children": {}, "elapsed_time": 1, "state": "FINISHED", "version": "32072898f3e438b58ef009309c508e0e", "error_ignorable": false, "id": "node04eac022b85a34608d954dc48329", "loop": 1}}, "elapsed_time": 64477, "state": "FAILED", "version": "", "error_ignorable": false, "id": "node41765627ceb230eca24c12b1832d", "loop": 1}, "result": true}}
